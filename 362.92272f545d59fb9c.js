"use strict";(self.webpackChunkpacifit=self.webpackChunkpacifit||[]).push([[362],{5362:(h,s,n)=>{n.r(s),n.d(s,{UserModule:()=>f});var c=n(9808),l=n(8698),r=n(2382),o=n(1223),d=n(9624);function m(i,a){1&i&&(o.TgZ(0,"span",6),o._uU(1,"Ingrese un numero valido"),o.qZA())}const g=[{path:"",children:[{path:"userInfo",component:(()=>{class i{constructor(e,t){this.fb=e,this.petServ=t,this.infoIncorrecta=!1,this.valoresLocalStorage={_id:"",nombreUsuario:"",nombreCompleto:"",masculinofemenino:"",contrasena:""},this.usuarioAEnviar={cantidadRepeticiones:0,estadoSolicitud:0,masculinofemenino:"",nombreCompleto:"",id:"",nombreUsuario:""},this.arregloSolicitud=[],this.miFormulario=this.fb.group({puntos:[,[r.kI.required]]})}ngOnInit(){this.valoresLocalStorage.nombreUsuario=JSON.parse(localStorage.getItem("userPaci")).usuario,this.valoresLocalStorage.contrasena=JSON.parse(localStorage.getItem("userPaci")).contrasena,this.valoresLocalStorage._id=JSON.parse(localStorage.getItem("userPaci")).id,this.valoresLocalStorage.nombreCompleto=JSON.parse(localStorage.getItem("userPaci")).nombreCompleto,this.valoresLocalStorage.masculinofemenino=JSON.parse(localStorage.getItem("userPaci")).masculinofemenino,this.usuarioAEnviar.nombreCompleto=this.valoresLocalStorage.nombreCompleto,this.usuarioAEnviar.id=this.valoresLocalStorage._id,this.usuarioAEnviar.masculinofemenino=this.valoresLocalStorage.masculinofemenino,this.usuarioAEnviar.cantidadRepeticiones=0,this.usuarioAEnviar.estadoSolicitud=0,this.usuarioAEnviar.nombreUsuario=this.valoresLocalStorage.nombreUsuario}guardar(){this.miFormulario.valid&&!isNaN(this.miFormulario.value.puntos)&&this.miFormulario.value.puntos>0?(this.infoIncorrecta=!1,this.petServ.getSolicitudesAdmin().subscribe(e=>{this.arregloSolicitud=e,this.actualizarInformacion()})):this.informacionIncorrecta()}informacionIncorrecta(){this.infoIncorrecta=!0}cerrar(){localStorage.removeItem("userPaci")}a\u00f1adirSolicitud(){this.petServ.postSolicitudAlAdmin(this.usuarioAEnviar).subscribe(e=>console.log(e)),this.miFormulario.reset({puntos:""})}actualizarInformacion(){for(let e=0;e<this.arregloSolicitud.length;e++)if(this.usuarioAEnviar.nombreUsuario==this.arregloSolicitud[e].nombreUsuario)return void this.actualizarSolicitudExistente(this.arregloSolicitud[e]._id,e);this.crearSolicitudUsuario()}crearSolicitudUsuario(){this.usuarioAEnviar.cantidadRepeticiones=this.miFormulario.value.puntos,this.usuarioAEnviar.estadoSolicitud=1,this.a\u00f1adirSolicitud()}actualizarSolicitudExistente(e,t){this.usuarioAEnviar.cantidadRepeticiones=parseInt(this.miFormulario.value.puntos)+this.arregloSolicitud[t].cantidadRepeticiones,this.usuarioAEnviar.estadoSolicitud=1,this.petServ.eliminarRegistroParaActualizar(e).subscribe(u=>{this.a\u00f1adirSolicitud()})}}return i.\u0275fac=function(e){return new(e||i)(o.Y36(r.qu),o.Y36(d.t))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-user-page"]],decls:12,vars:4,consts:[[1,"loginContainer"],[1,"form-register",3,"formGroup"],["class","info",4,"ngIf"],["formControlName","puntos","type","text","name","nombres","id","nombres","placeholder","\xbfCuantos burpees hiciste hoy?",1,"controls"],[1,"boton",3,"click"],["href","#/home",3,"click"],[1,"info"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"section",1)(2,"h4"),o._uU(3),o.qZA(),o.TgZ(4,"h6"),o._uU(5),o.qZA(),o.YNc(6,m,2,0,"span",2),o._UZ(7,"input",3),o.TgZ(8,"button",4),o.NdJ("click",function(){return t.guardar()}),o._uU(9,"ENVIAR"),o.qZA(),o.TgZ(10,"a",5),o.NdJ("click",function(){return t.cerrar()}),o._uU(11,"Cerrar sesion"),o.qZA()()()),2&e&&(o.xp6(1),o.Q6J("formGroup",t.miFormulario),o.xp6(2),o.hij("Bienvenid@ ",t.usuarioAEnviar.nombreCompleto,""),o.xp6(2),o.hij("Recuerda que estas en la categoria ",t.usuarioAEnviar.masculinofemenino,""),o.xp6(1),o.Q6J("ngIf",t.infoIncorrecta))},directives:[r.JL,r.sg,c.O5,r.Fj,r.JJ,r.u],styles:[".loginContainer[_ngcontent-%COMP%]{width:100%;height:100vh;background-color:#000;position:absolute;background-image:url(/assets/biglogo.jpg);background-repeat:no-repeat;background-size:contain;background-position:right}.info[_ngcontent-%COMP%]{color:red;font-size:15px;margin-bottom:20px}.form-register[_ngcontent-%COMP%]{width:30%;background:#24303c;padding:30px;margin:200px auto auto;border-radius:4px;font-family:Arial,Helvetica,sans-serif;color:#fff;box-shadow:7px 13px 37px #000;display:flex;flex-direction:column;justify-content:space-around;align-content:center}.form-register[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:22px;margin-bottom:20px;align-self:center}.controls[_ngcontent-%COMP%]{width:95%;background:#24303c;padding:10px;border-radius:4px;margin-bottom:16px;border:1px solid #1f53c5;font-family:Arial,Helvetica,sans-serif;font-size:18px;color:#fff}.form-register[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{height:40px;text-align:center;font-size:18px;line-height:40px}.form-register[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;align-self:center;cursor:pointer}.form-register[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;text-decoration:underline}button[_ngcontent-%COMP%]{align-self:center;width:50%;background:#1f53c5;border:none;padding:12px;color:#fff;margin:16px 0;font-size:16px;border-radius:15px;cursor:pointer}@media all and (min-width: 0px) and (max-width: 1110px){.form-register[_ngcontent-%COMP%]{width:50%}}@media all and (min-width: 0px) and (max-width: 650px){.form-register[_ngcontent-%COMP%]{width:80%}}@media all and (min-width: 0px) and (max-width: 450px){.form-register[_ngcontent-%COMP%]{width:85%}.controls[_ngcontent-%COMP%]{align-self:center;width:70%}a[_ngcontent-%COMP%]{font-size:15px}}"]}),i})()},{path:"**",redirectTo:"userInfo"}]}];let p=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[l.Bz.forChild(g)],l.Bz]}),i})(),f=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[[c.ez,p,r.UX]]}),i})()}}]);